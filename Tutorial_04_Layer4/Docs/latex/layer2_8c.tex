\hypertarget{layer2_8c}{}\doxysection{Layer2/layer2.c File Reference}
\label{layer2_8c}\index{Layer2/layer2.c@{Layer2/layer2.c}}
{\ttfamily \#include $<$avr/io.\+h$>$}\newline
{\ttfamily \#include $<$avr/interrupt.\+h$>$}\newline
{\ttfamily \#include \char`\"{}../\+Layer1/timer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Layer2/layer2.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Layer1/layer1.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Buffer/buffer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+CRC32/crc32.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+USART/usart.\+h\char`\"{}}\newline
Include dependency graph for layer2.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{layer2_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{layer2_8c_a30537337faf9a89c325c0a39a63ab0ab}{get\+Message}} (uint8\+\_\+t $\ast$msg, uint8\+\_\+t $\ast$size, uint8\+\_\+t $\ast$error)
\begin{DoxyCompactList}\small\item\em Check if a message was recieved, if yes\+: message will be written in the given msg pointer when crc checksum is correct. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{layer2_8c_a2f02b445d682efb68beb9a25d8d1e2d0}{get\+Message\+Without\+Crc}} (uint8\+\_\+t $\ast$msg, uint8\+\_\+t $\ast$size, uint8\+\_\+t $\ast$error)
\begin{DoxyCompactList}\small\item\em Get the message without CRC calculation. Is needed for better performance. Copies data from buffer in given parameters. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{layer2_8c_a1a1232f7ff473df2e38e88d9894e2d30}{send\+Message}} (uint8\+\_\+t $\ast$payload, uint8\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Send message with a given payload and size. Calculates the CRC32 of the payload notify layer1 to starts transmission. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{layer2_8c_ae6ec8b5779d43300778a6667f661c79b}{Init\+Message\+Service\+RX}} ()
\begin{DoxyCompactList}\small\item\em Initialize receiver service to receive messages. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{layer2_8c_ad02df7f08e0059fa11fa8677d5288ab6}{Init\+Message\+Service\+TX}} (uint8\+\_\+t prescaler, volatile uint8\+\_\+t $\ast$port, uint8\+\_\+t $\ast$mask)
\begin{DoxyCompactList}\small\item\em Initialize transmitter service to send messages with a given port, mask and prescaler for clock. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{layer2_8c_a30537337faf9a89c325c0a39a63ab0ab}\label{layer2_8c_a30537337faf9a89c325c0a39a63ab0ab}} 
\index{layer2.c@{layer2.c}!getMessage@{getMessage}}
\index{getMessage@{getMessage}!layer2.c@{layer2.c}}
\doxysubsubsection{\texorpdfstring{getMessage()}{getMessage()}}
{\footnotesize\ttfamily void get\+Message (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{msg,  }\item[{uint8\+\_\+t $\ast$}]{size,  }\item[{uint8\+\_\+t $\ast$}]{error }\end{DoxyParamCaption})}



Check if a message was recieved, if yes\+: message will be written in the given msg pointer when crc checksum is correct. 


\begin{DoxyParams}{Parameters}
{\em msg} & pointer where the received message will be written \\
\hline
{\em size} & pointer of the size of the message \\
\hline
{\em error} & pointer of the error handeling \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{layer2_8c_a30537337faf9a89c325c0a39a63ab0ab_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{layer2_8c_a2f02b445d682efb68beb9a25d8d1e2d0}\label{layer2_8c_a2f02b445d682efb68beb9a25d8d1e2d0}} 
\index{layer2.c@{layer2.c}!getMessageWithoutCrc@{getMessageWithoutCrc}}
\index{getMessageWithoutCrc@{getMessageWithoutCrc}!layer2.c@{layer2.c}}
\doxysubsubsection{\texorpdfstring{getMessageWithoutCrc()}{getMessageWithoutCrc()}}
{\footnotesize\ttfamily void get\+Message\+Without\+Crc (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{msg,  }\item[{uint8\+\_\+t $\ast$}]{size,  }\item[{uint8\+\_\+t $\ast$}]{error }\end{DoxyParamCaption})}



Get the message without CRC calculation. Is needed for better performance. Copies data from buffer in given parameters. 


\begin{DoxyParams}{Parameters}
{\em msg} & pointer where the received message will be written \\
\hline
{\em size} & pointer of the size of the message \\
\hline
{\em error} & pointer of the error handeling \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=301pt]{layer2_8c_a2f02b445d682efb68beb9a25d8d1e2d0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{layer2_8c_a2f02b445d682efb68beb9a25d8d1e2d0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{layer2_8c_ae6ec8b5779d43300778a6667f661c79b}\label{layer2_8c_ae6ec8b5779d43300778a6667f661c79b}} 
\index{layer2.c@{layer2.c}!InitMessageServiceRX@{InitMessageServiceRX}}
\index{InitMessageServiceRX@{InitMessageServiceRX}!layer2.c@{layer2.c}}
\doxysubsubsection{\texorpdfstring{InitMessageServiceRX()}{InitMessageServiceRX()}}
{\footnotesize\ttfamily void Init\+Message\+Service\+RX (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initialize receiver service to receive messages. 

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=267pt]{layer2_8c_ae6ec8b5779d43300778a6667f661c79b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{layer2_8c_ad02df7f08e0059fa11fa8677d5288ab6}\label{layer2_8c_ad02df7f08e0059fa11fa8677d5288ab6}} 
\index{layer2.c@{layer2.c}!InitMessageServiceTX@{InitMessageServiceTX}}
\index{InitMessageServiceTX@{InitMessageServiceTX}!layer2.c@{layer2.c}}
\doxysubsubsection{\texorpdfstring{InitMessageServiceTX()}{InitMessageServiceTX()}}
{\footnotesize\ttfamily void Init\+Message\+Service\+TX (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{prescaler,  }\item[{volatile uint8\+\_\+t $\ast$}]{port,  }\item[{uint8\+\_\+t $\ast$}]{mask }\end{DoxyParamCaption})}



Initialize transmitter service to send messages with a given port, mask and prescaler for clock. 


\begin{DoxyParams}{Parameters}
{\em prescaler} & NO\+\_\+\+PRE, PRE\+\_\+8, PRE\+\_\+64, PRE\+\_\+256, PRE\+\_\+1024 \\
\hline
{\em port} & Pointer of the port for transmission e.\+g PD \\
\hline
{\em mask} & Pointer of the mask to the port register \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=291pt]{layer2_8c_ad02df7f08e0059fa11fa8677d5288ab6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=265pt]{layer2_8c_ad02df7f08e0059fa11fa8677d5288ab6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{layer2_8c_a1a1232f7ff473df2e38e88d9894e2d30}\label{layer2_8c_a1a1232f7ff473df2e38e88d9894e2d30}} 
\index{layer2.c@{layer2.c}!sendMessage@{sendMessage}}
\index{sendMessage@{sendMessage}!layer2.c@{layer2.c}}
\doxysubsubsection{\texorpdfstring{sendMessage()}{sendMessage()}}
{\footnotesize\ttfamily void send\+Message (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{payload,  }\item[{uint8\+\_\+t}]{size }\end{DoxyParamCaption})}



Send message with a given payload and size. Calculates the CRC32 of the payload notify layer1 to starts transmission. 


\begin{DoxyParams}{Parameters}
{\em payload} & pointer of the payload \\
\hline
{\em size} & size of the payload \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=265pt]{layer2_8c_a1a1232f7ff473df2e38e88d9894e2d30_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{layer2_8c_a1a1232f7ff473df2e38e88d9894e2d30_icgraph}
\end{center}
\end{figure}
